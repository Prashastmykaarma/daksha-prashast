version: '3'
services:
  engine-apache:
    image: httpd:2.4-alpine
    container_name: engine-apache
    restart: always
    volumes:
      - /daksha/test-data:/usr/local/apache2/htdocs/
    ports:
      - "8485:80"

  web:
    build: .
    container_name: daksha
    restart: always
    volumes:
      - /daksha/test-data:/daksha/test-data
    ports:
      - "8083:8000"
    environment:
      STORAGE_PATH: "/daksha/test-data"
      APACHE_URL: "http://127.0.0.1:8485/"
      TEST_RESULT_DB: "postgres"
      PG_DB : "postgres"
      PG_USER : "rpuser"
      PG_HOST: "postgres"
      PG_PASSWORD: "rppass"
      PG_PORT: "5432"
      CRON_ENABLED : "True"
      CRON_FILE_SOURCE : git
      CRON_FILE_PATH : /CRON_FILE_PATH
      REPORT_PORTAL_ENABLED : "True"
      REPORT_PORTAL_ENDPOINT: ${REPORT_PORTAL_ENDPOINT}
      REPORT_PORTAL_PROJECT_NAME: ${REPORT_PORTAL_PROJECT_NAME}
      REPORT_PORTAL_TOKEN: ${REPORT_PORTAL_TOKEN}
      
    